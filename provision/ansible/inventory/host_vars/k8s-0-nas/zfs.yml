---
zfs_install_update: false
zfs_manage_filesystem_permissions: true
zfs_enable_performance_tuning: true
zfs_create_pools: true
zfs_create_filesystems: true
zfs_enable_nfs: false
# This is disabled to use my own task for samba
zfs_enable_samba: false

# enable email alerts
zfs_email_alerts: true
# enable smartd monitoring
zfs_enable_smartd: true
# enable zfs-zed monitoring. needs email configured to work.
zfs_enable_zed: true
# Use systemd timers instead of cron for scrubs
zfs_enable_systemd_scrub: true
# systemd timer settings
zfs_scrub_pools:
  # Run every month on the 1st and 15th at 1am
  on_calendar: "*-*-1,15 01:00:00"
  accuracy: 1h

zfs_pools:
  - name: deadpool
    action: create
    atime: on
    compression: lz4
    devices:
      - "/dev/disk/by-id/scsi-SATA_WDC_WD4000F9YZ-0_WD-WMC5D0D6800V"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD4000F9YZ-0_WD-WCC5D2SUA7ZL"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD4000F9YZ-0_WD-WCC5D3CC14CK"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD4000F9YZ-0_WD-WCC5D2SUA7XF"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD4000F9YZ-0_WD-WMC5D0D9LS0V"
      - "/dev/disk/by-id/scsi-SATA_HGST_HUH721008AL_7SHP1UKW"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD8004FRYZ-0_VGKMJNWG"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD8004FRYZ-0_VGHHKTBK"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD8004FRYZ-0_VGKN370G"
      - "/dev/disk/by-id/scsi-SATA_WDC_WD8004FRYZ-0_VGHPA2YG"
    type: raidz2
    state: present
  - name: k8s
    action: create
    atime: on
    compression: lz4
    devices:
      - "/dev/disk/by-id/scsi-SATA_CT250MX500SSD4_2008E28E2924"
    type: basic
    state: present

zfs_filesystems:
  - name: backups
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/backups

  - name: containous
    pool: deadpool
    state: present
    owner: root
    group: root
    mode: 755
    mountpoint: /deadpool/containous

  - name: media
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media
  - name: media/audiobooks
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media/audiobooks
  - name: media/downloads
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media/downloads
  - name: media/games
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media/games
  - name: media/music
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media/music
  - name: media/pictures
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media/pictures
  - name: media/videos
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 775
    mountpoint: /deadpool/media/videos

  - name: timemachine
    pool: deadpool
    state: present
    owner: root
    group: home_users
    mode: 770
    mountpoint: /deadpool/timemachine
  - name: timemachine/j_r0dd
    pool: deadpool
    state: present
    owner: j_r0dd
    group: home_users
    mode: 700
    mountpoint: /deadpool/timemachine/j_r0dd
  - name: timemachine/waleska
    pool: deadpool
    state: present
    owner: waleska
    group: home_users
    mode: 700
    mountpoint: /deadpool/timemachine/waleska
  - name: timemachine/nathan
    pool: deadpool
    state: present
    owner: nathan
    group: home_users
    mode: 700
    mountpoint: /deadpool/timemachine/nathan

  - name: containous
    pool: k8s
    state: present
    owner: root
    group: root
    mode: 755
    mountpoint: /k8s/containous
