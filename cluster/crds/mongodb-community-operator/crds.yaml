---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: mongodb-community-operator-crds
  namespace: flux-system
spec:
  interval: 15m
  prune: false
  wait: true
  sourceRef:
    kind: GitRepository
    name: mongodb-community-operator
  patches:
    - target:
        kind: CustomResourceDefinition
        name: mongodbcommunity.mongodbcommunity.mongodb.com
      patch: |-
        - op: add
          path: /metadata/labels/app.kubernetes.io
          value:
            name: "managed-by"
            value: "Helm"
        - op: add
          path: /metadata/annotations/meta.helm.sh
          value:
            name: "release-name"
            value: "mongodb-community-operator"
        - op: add
          path: /metadata/annotations/meta.helm.sh
          value:
            name: "release-namespace"
            value: "databases"
