---
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: nut-exporter
  namespace: monitoring
  labels:
    app.kubernetes.io/name: nut-exporter
spec:
  jobLabel: nut-exporter
  selector:
    matchLabels:
      app.kubernetes.io/name: network-ups-tools
  podMetricsEndpoints:
  - interval: 15s
    path: /metrics
    port: metrics
    scrapeTimeout: 10s
    params:
      target:
      - network-ups-tools:3493
    relabelings:
    - sourceLabels: [__address__]
      targetLabel: __param_target
    - sourceLabels: [__param_target]
      targetLabel: instance
    - targetLabel: __address__
      replacement: nut-exporter.monitoring.svc.cluster.local:9995